---
import Layout from '../layouts/Layout.astro';
import { getCities, getDealersByCitySlug } from '../lib/dealers';
import CityCard from '../components/CityCard.astro';
import cityCovers from '../data/city-covers.json';

const cities = getCities().slice(0, 24);

// Get previews for the homepage cities
const previews = new Map<string, string | undefined>();
for (const c of cities) {
	const rawCover = (cityCovers as any)?.[c.citySlug] as any;
	const cover = (typeof rawCover === 'string' ? rawCover : rawCover?.url) as string | undefined;
	if (cover) {
		previews.set(c.citySlug, cover);
	} else {
		const dealers = getDealersByCitySlug(c.citySlug);
		const dealerImage = dealers.find((d) => !!d.imageUrl)?.imageUrl;
		if (dealerImage) {
			previews.set(c.citySlug, dealerImage);
		}
	}
}
---

<Layout
	title="IndianLuxuryCars.com | Pre-owned Luxury Cars (India)"
	description="IndianLuxuryCars.com — browse pre-owned luxury car dealers by city across India. Compare reviews, locations, and contact details."
>
	<div class="relative w-full overflow-hidden">
		<!-- Hero Section -->
		<section class="relative min-h-[85vh] flex items-center justify-center px-4 py-20 overflow-hidden">
			<!-- Background Image & Gradient -->
			<div class="absolute inset-0 z-0">
				<div class="absolute inset-0 bg-black/40 z-10"></div>
				<div class="absolute inset-0 bg-gradient-to-t from-[#05060a] via-transparent to-transparent z-10"></div>
				<div class="relative w-full h-full">
					<img 
						src="/cars/luxury-showroom.jpg" 
						alt="Luxury Car Showroom" 
						class="absolute inset-0 w-full h-full object-cover animate-fade-in"
						style="animation-duration: 3s;"
					/>
				</div>
			</div>

			<!-- Content -->
			<div class="relative z-20 text-center max-w-4xl mx-auto flex flex-col items-center gap-8">
				<div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 backdrop-blur-md">
					<span class="w-1.5 h-1.5 rounded-full bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.5)]"></span>
					<span class="text-xs font-medium tracking-widest uppercase text-white/80">Premium Concierge</span>
				</div>

				<h1 class="text-5xl sm:text-7xl lg:text-8xl font-serif text-white tracking-tight leading-[1.1]">
					Experience <br/>
					<span class="text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-white to-amber-100">Absolute Luxury</span>
				</h1>

				<p class="text-lg sm:text-xl text-white/70 max-w-2xl font-light leading-relaxed">
					Curated pre-owned luxury vehicles from India's most trusted dealers. 
					Transparency, elegance, and exclusivity in every interaction.
				</p>

				<div class="flex flex-col sm:flex-row gap-4 mt-4 w-full sm:w-auto">
					<a href="/pre-owned-luxury-cars" class="group relative px-8 py-4 bg-white text-black text-sm font-bold uppercase tracking-wider overflow-hidden rounded-full transition-transform hover:scale-105">
						<span class="relative z-10 group-hover:text-black">Browse Collection</span>
					</a>
					<a href="/contact" class="px-8 py-4 bg-transparent border border-white/20 text-white text-sm font-bold uppercase tracking-wider rounded-full hover:bg-white/5 transition-all hover:border-white/40">
						Concierge Service
					</a>
				</div>
			</div>
		</section>

		<!-- Trust Indicators -->
		<section class="py-12 border-y border-white/5 bg-white/[0.02]">
			<div class="max-w-[1180px] mx-auto px-6">
				<div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center divide-x divide-white/5">
					<div class="flex flex-col gap-2">
						<span class="text-3xl font-serif text-amber-200">25+</span>
						<span class="text-sm text-white/50 uppercase tracking-widest">Cities</span>
					</div>
					<div class="flex flex-col gap-2">
						<span class="text-3xl font-serif text-amber-200">500+</span>
						<span class="text-sm text-white/50 uppercase tracking-widest">Verified Dealers</span>
					</div>
					<div class="flex flex-col gap-2">
						<span class="text-3xl font-serif text-amber-200">100%</span>
						<span class="text-sm text-white/50 uppercase tracking-widest">Transparency</span>
					</div>
					<div class="flex flex-col gap-2">
						<span class="text-3xl font-serif text-amber-200">24/7</span>
						<span class="text-sm text-white/50 uppercase tracking-widest">Support</span>
					</div>
				</div>
			</div>
		</section>

		<!-- How it Works (Minimal) -->
		<section class="py-24 px-6">
			<div class="max-w-[1180px] mx-auto">
				<div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
					<div>
						<h2 class="text-4xl md:text-5xl font-serif text-white mb-4">Seamless Acquisition</h2>
						<p class="text-white/60 max-w-md text-lg font-light">Your journey to owning a masterpiece, simplified into three elegant steps.</p>
					</div>
					<a href="/contact" class="text-amber-200 border-b border-amber-200/30 pb-1 hover:border-amber-200 transition-colors">Start your journey &rarr;</a>
				</div>

				<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
					<!-- Step 1 -->
					<div class="group p-8 rounded-3xl bg-white/[0.02] border border-white/5 hover:bg-white/[0.04] transition-colors duration-500">
						<div class="text-6xl font-serif text-white/10 mb-6 group-hover:text-amber-200/20 transition-colors">01</div>
						<h3 class="text-xl font-medium text-white mb-3">Define Your Desire</h3>
						<p class="text-white/60 leading-relaxed">Tell us your preferences—budget, marque, model, and city. We listen to every detail.</p>
					</div>
					<!-- Step 2 -->
					<div class="group p-8 rounded-3xl bg-white/[0.02] border border-white/5 hover:bg-white/[0.04] transition-colors duration-500">
						<div class="text-6xl font-serif text-white/10 mb-6 group-hover:text-amber-200/20 transition-colors">02</div>
						<h3 class="text-xl font-medium text-white mb-3">Curated Selection</h3>
						<p class="text-white/60 leading-relaxed">Access verified inventory from India's most reputable dealers, hand-picked for you.</p>
					</div>
					<!-- Step 3 -->
					<div class="group p-8 rounded-3xl bg-white/[0.02] border border-white/5 hover:bg-white/[0.04] transition-colors duration-500">
						<div class="text-6xl font-serif text-white/10 mb-6 group-hover:text-amber-200/20 transition-colors">03</div>
						<h3 class="text-xl font-medium text-white mb-3">Acquire with Confidence</h3>
						<p class="text-white/60 leading-relaxed">Inspect, negotiate, and drive away. We ensure a transparent and secure transaction.</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Featured Cities -->
		<section class="py-24 px-6 bg-white/[0.01]">
			<div class="max-w-[1180px] mx-auto">
				<div class="text-center mb-16">
					<h2 class="text-4xl md:text-5xl font-serif text-white mb-4">Exclusive Locations</h2>
					<p class="text-white/60 font-light text-lg">Browse our network of premium dealerships across major cities.</p>
				</div>
				
				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
					{cities.map((c) => (
						<CityCard cityName={c.cityName} citySlug={c.citySlug} count={c.count} imageUrl={previews.get(c.citySlug)} />
					))}
				</div>
				
				<div class="mt-16 text-center">
					<a href="/pre-owned-luxury-cars" class="inline-flex items-center gap-2 text-white/80 hover:text-white transition-colors border-b border-transparent hover:border-white pb-1">
						View all locations <span aria-hidden="true">&rarr;</span>
					</a>
				</div>
			</div>
		</section>

		<!-- Final CTA -->
		<section class="py-32 px-6 relative overflow-hidden">
			<div class="absolute inset-0 bg-gradient-to-b from-transparent to-amber-900/10 pointer-events-none"></div>
			<div class="max-w-4xl mx-auto text-center relative z-10">
				<h2 class="text-5xl md:text-7xl font-serif text-white mb-8 tracking-tight">Your Dream Car Awaits.</h2>
				<p class="text-xl text-white/60 font-light mb-10 max-w-2xl mx-auto">
					Join the exclusive circle of luxury car owners in India. Let us find your perfect match.
				</p>
				<a href="/contact" class="inline-block px-10 py-5 bg-white text-black text-sm font-bold uppercase tracking-widest rounded-full hover:bg-amber-50 transition-colors transform hover:-translate-y-1 duration-300">
					Get Started
				</a>
			</div>
		</section>
	</div>

	<style>
		/* Simple fade in animation */
		@keyframes fadeIn {
			from { opacity: 0; transform: scale(1.05); }
			to { opacity: 1; transform: scale(1); }
		}
		.animate-fade-in {
			animation: fadeIn 1.5s ease-out forwards;
		}
	</style>
</Layout>
